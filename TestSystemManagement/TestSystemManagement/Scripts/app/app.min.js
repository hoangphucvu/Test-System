!function(){"use strict";angular.module("TestSystemManagement",["ngAnimate","routeApp"])}(),function(){"use strict";function a(a,b){b.when("/",{templateUrl:"/Template/Index.html",controller:"IndexController"}).when("/admin/subject/new-subject",{templateUrl:"/Template/NewSubject.html",controller:"NewSubjectController"}).when("/admin/quiz/import-quiz",{templateUrl:"/Template/UploadQuestion.html",controller:"ImportQuestionController"}).when("/admin/quiz/new-quiz",{templateUrl:"/Template/NewQuiz.html",controller:"QuizController"}).otherwise({templateUrl:"/Template/Index.html",controller:"IndexController"}),a.html5Mode({enabled:!0,requireBase:!1})}angular.module("routeApp",["ngRoute"]).config(a),a.$inject=["$locationProvider","$routeProvider"]}(),function(){"use strict";function a(a,b){a.Logout=function(){window.location="/Account/Login"}}angular.module("TestSystemManagement").controller("IndexController",a),a.$inject=["$scope","$http"]}(),function(){"use strict";function a(a,b,c){a.title="Hệ Thống Quản Lý Đề Thi",a.IsLogging=!1,a.Submitted=!1,a.IsFormValid=!1,a.LoginData={Username:"",Password:""},a.$watch("LoginForm.$valid",function(b){a.IsFormValid=b}),a.Login=function(){a.IsLogging=!0,a.Submitted=!0,a.IsFormValid&&(a.ShowLoading=!0,a.HideLoginBtn=!0,c.GetLogin(a.LoginData).then(function(b){b.data===!0&&(a.IsLogin=!0,window.location.href="/Admin"),b.data===!1&&(a.Message="Vui lòng kiểm tra tên đăng nhập vả mật khẩu",Materialize.toast("Vui lòng kiểm tra tên đăng nhập vả mật khẩu",4e3),a.ShowLoading=!1,a.HideLoginBtn=!1)}))}}angular.module("TestSystemManagement").controller("LoginController",a),a.$inject=["$scope","$location","LoginService"]}(),function(){"use strict";function a(a,b){a.QuizFormSubmitted=!1,a.IsQuizFormFormValid=!1,a.ImportTextData={Question:"",AnswerA:"",AnswerB:"",AnswerC:"",AnswerD:"",CorrectAnswer:"",TypeOfQuestion:"",Point:""},a.$watch("NewTextForm.$valid",function(b){a.IsQuizFormFormValid=!0}),a.GenerateQuestion=function(b){var d=c(b,null);if("number"!=typeof d)return alert("Vui lòng nhập số thích hợp"),!1;for(i=1;i<=d;i++){a.number=i;var e=angular.element(document.querySelector("#cloneArea")),f=angular.element(document.querySelector("#cloneContent"));e.append(f.clone())}},a.ImportTextQuiz=function(){a.QuizFormSubmitted=!0;var c=$("#newTextForm").serializeArray();console.log(c);var d=c.map(function(a){return a.value});a.IsQuizFormFormValid&&b.NewTextQuestion(d).then(function(a){console.log(a),"success"===a.data?Materialize.toast("Upload thành công",4e3):Materialize.toast("Upload không thành công",4e3)})}}function b(a,b){a.IsFileValid=!1,a.HideUploadBtn=!1,a.Loading=!1,a.IsFormValid=!1,a.Submitted=!1,a.fileUpload=null,a.Message=null,a.CheckFile=function(b){a.$apply(function(a){a.fileUpload=b.files[0],a.fileMessage="";var c=a.fileUpload.name;console.log(c.length);var e=c.lastIndexOf("."),f=c.substring(e,c.length);".docx"===f||".doc"===f||".xls"===f||".xlsx"===f||".txt"===f?(a.IsFileValid=!0,d=f):a.fileMessage="FIle phải có định dạng .txt, .docx or .xlsx"})},a.$watch("ImportQuestionForm.$valid",function(b){a.IsFormValid=b}),a.ImportQuestion=function(){a.Submitted=!0,a.IsFileValid&&a.IsFormValid?(a.HideUploadBtn=!0,a.Loading=!0,b.UploadQuestion(a.fileUpload,d).then(function(b){console.log(b),b===!0?(Materialize.toast("Upload thành công",4e3),a.HideUploadBtn=!1,a.Loading=!1):(a.Message="Có lỗi xảy ra vui lòng thử lại",a.HideUploadBtn=!1,a.Loading=!1)},function(b){a.Message="Có lỗi xảy ra vui lòng thử lại"})):(a.Message="Vui lòng chọn file",a.HideUploadBtn=!1,a.Loading=!1)}}function c(a,b){var c=b;return null!==a&&a.length>0&&(isNaN(a)||(c=parseInt(a))),c}angular.module("TestSystemManagement").controller("QuizController",a).controller("ImportQuestionController",b),a.$inject=["$scope","ImportTextQuestionService"],b.inject=["$scope","ImportQuestionService"];var d=null}(),function(){"use strict";function a(a,b,c){a.Submitted=!1,a.IsFormValid=!1,a.Loading=!1,a.HideAddSubjectBtn=!1,a.SubjectData={SubjectName:"",SubjectCode:"",NoOfEasyQuestion:"",NoOfMediumQuestion:"",NoOfHardQuestion:"",TestDate:""},a.$watch("AddNewSubjectForm.$valid",function(b){a.IsFormValid=b}),a.AddNewSubject=function(){a.Submitted=!0,a.IsFormValid&&(a.Loading=!0,a.HideAddSubjectBtn=!0,c.NewSubject(a.SubjectData).then(function(b){"success"===b.data?(alert("Thêm môn thành công"),a.Loading=!1,a.HideAddSubjectBtn=!1):(alert("Vui lòng kiểm tra dữ liệu"),a.Loading=!1,a.HideAddSubjectBtn=!1)}))}}angular.module("TestSystemManagement").controller("NewSubjectController",a),a.inject=["$scope","$http","NewSubjectService"]}(),function(){"use strict";function a(a){var b={};return b.GetLogin=function(b){return a({url:"/Account/Login",method:"POST",data:JSON.stringify(b),header:{"content-type":"application/json"}})},b}angular.module("TestSystemManagement").factory("LoginService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){var b={};return b.NewTextQuestion=function(b){return a({url:"http://localhost:2151/api/TestDetails",method:"POST",data:JSON.stringify(b),header:{"content-type":"application/json"}})},b}function b(a,b){var c={};return c.UploadQuestion=function(c,d){var e=new FormData;e.append("file",c);var f="http://localhost:2151/TestDetail/UploadFile",g=b.defer();return a.post(f,e,{headers:{"Content-type":void 0},transformRequest:angular.identity}).success(function(a){g.resolve(a)}).error(function(){g.reject("File Upload Failed!")}),g.promise},c}angular.module("TestSystemManagement").factory("ImportQuestionService",b).factory("ImportTextQuestionService",a),b.$inject=["$http","$q"],a.$inject=["$http"]}(),function(){"use strict";function a(a){var b={};return b.NewSubject=function(b){return a({url:"http://localhost:2151/api/Subject",method:"POST",data:JSON.stringify(b),header:{"content-type":"application/json"}})},b}angular.module("TestSystemManagement").factory("NewSubjectService",a),a.$inject=["$http"]}();var acc=document.getElementsByClassName("accordion"),i;for(i=0;i<acc.length;i++)acc[i].onclick=function(){this.classList.toggle("active"),this.nextElementSibling.classList.toggle("show")};